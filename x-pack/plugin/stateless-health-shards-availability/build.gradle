apply plugin: 'elasticsearch.internal-es-plugin'
apply plugin: 'elasticsearch.internal-java-rest-test'
apply plugin: 'elasticsearch.internal-cluster-test'
apply plugin: 'elasticsearch.internal-test-artifact'

esplugin {
    name = 'stateless-health-shards-availability'
    description = 'Overrides Shards Availability indicator with stateless-specific version'
    classname = 'org.elasticsearch.xpack.stateless.health.StatelessShardsHealthPlugin'
}

configurations {
    all {
        resolutionStrategy {
            preferProjectModules()
        }
    }
}

dependencies {
    compileOnly 'org.elasticsearch:server'
    testImplementation 'org.elasticsearch.test:framework'

    internalClusterTestImplementation testArtifact(project(':x-pack:plugin:stateless'))
    internalClusterTestImplementation testArtifact(project(':x-pack:plugin:stateless'), 'internalClusterTest')
}
